<!DOCTYPE html>
<html>

<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta charset="UTF-8"/>
	<title>Multi-page template</title>
	
	
	<!-- SCRIPTS VEXXX MUSICXML -->
<!-- VexFlow Sources -->
<script src="src/vex.js"></script>
<script src="src/flow.js"></script>
<script src="src/fraction.js"></script>
<script src="src/fonts/vexflow_font.js"></script>
<script src="src/glyph.js"></script>
<script src="src/tables.js"></script>
<script src="src/stave.js"></script>
<script src="src/staveconnector.js"></script>
<script src="src/voice.js"></script>
<script src="src/voicegroup.js"></script>
<script src="src/modifier.js"></script>
<script src="src/modifiercontext.js"></script>
<script src="src/accidental.js"></script>
<script src="src/dot.js"></script>
<script src="src/tickcontext.js"></script>
<script src="src/tickable.js"></script>
<script src="src/note.js"></script>
<script src="src/bend.js"></script>
<script src="src/stem.js"></script>
<script src="src/notehead.js"></script>
<script src="src/stemmablenote.js"></script>
<script src="src/stavenote.js"></script>
<script src="src/tabnote.js"></script>
<script src="src/barnote.js"></script>
<script src="src/clefnote.js"></script>
<script src="src/timesignote.js"></script>
<script src="src/ghostnote.js"></script>
<script src="src/formatter.js"></script>
<script src="src/stavetie.js"></script>
<script src="src/stavehairpin.js"></script>
<script src="src/tabtie.js"></script>
<script src="src/tabslide.js"></script>
<script src="src/beam.js"></script>
<script src="src/vibrato.js"></script>
<script src="src/annotation.js"></script>
<script src="src/tuning.js"></script>
<script src="src/stavemodifier.js"></script>
<script src="src/keysignature.js"></script>
<script src="src/timesignature.js"></script>
<script src="src/clef.js"></script>
<script src="src/music.js"></script>
<script src="src/keymanager.js"></script>
<script src="src/renderer.js"></script>
<script src="src/stavebarline.js"></script>
<script src="src/stavevolta.js"></script>
<script src="src/staverepetition.js"></script>
<script src="src/stavesection.js"></script>
<script src="src/stavetempo.js"></script>
<script src="src/stavetext.js"></script>
<script src="src/raphaelcontext.js"></script>
<script src="src/canvascontext.js"></script>
<script src="src/tuplet.js"></script>
<script src="src/boundingbox.js"></script>
<script src="src/textnote.js"></script>

<script src="src/measure.js"></script>
<script src="src/musicxml.js"></script>
<script src="src/document.js"></script>
<script src="src/documentformatter.js"></script>

<!-- Test Sources -->
<script src="js/part_complete.js"></script>
<script src="js/part_simples.js"></script>
<script src="js/part_duas_pautas.js"></script>
<script src="js/part_ishigo_nocom.js"></script>

<link rel="stylesheet" href="js/qunit.css" type="text/css"
	media="screen" />
<script src="js/jquery.js"></script>
<script src="js/qunit.js"></script>
<script src="js/teste.js"></script>
<!-- END OF MUSICXML -->
	
	
	<link rel="stylesheet" href="css/jquery.mobile-1.4.3.min.css">
	<link rel="stylesheet" href="css/jqm-demos.css">
	<link rel="shortcut icon" href="img/__logo.png">
	<script src="js/jquery.mobile-1.4.3.min.js"></script>
	<script>
		$(function(){
			$( "[data-role='header'], [data-role='footer']" ).toolbar();
		});
	</script>
	
<style text="text/css">
#exibePart {
	background-color: #eed;
	background: #eed;
}

#exibe_info {
	background-color: #eed;
	background: #eed;
}

canvas {
	background: #eed;
}

div.egcode {
	font-family: Courier;
	font-size: 14px;
}

footer {
	padding: 10px;
}

#container {
	border: 1px solid #ccc; height: 100px; overflow: scroll; width: 100px;
}
</style>
</head>

<body>

<!-- Start of first page: #one -->
<div data-role="page" id="mainpage" data-footer="div_footer">

	<div data-role="header">
		<h1>EasyScore</h1>
		<a href="#" class="ui-btn-right ui-btn ui-btn-inline ui-mini ui-corner-all ui-btn-icon-right ui-icon-gear">Options</a>
	</div><!-- /header -->

	<div role="main" class="ui-content">
		<ul data-role="listview" data-inset="true">
			<li><a href="#selecionaPart">Estúdio 1</a></li>
			<li><a href="#selecionaPart">Estúdio 2</a></li>
			<li><a href="#selecionaPart">Estúdio 3</a></li>
		</ul>
		
		<p><a href="#upload" class="ui-btn ui-shadow ui-corner-all">Show page "two"</a></p>
		<p><a href="#selecionaExemplo" class="ui-btn ui-shadow ui-corner-all" data-rel="dialog" data-transition="pop">Seleciona Exemplo</a></p>
	</div><!-- /content -->
</div><!-- /page one -->

<!-- Start of second page: #upload -->
<div data-role="page" id="upload" data-theme="a" data-footer="div_footer">

	<div data-role="header">
		<h1>Carregar Partitura</h1>
		<a href="#" class="ui-btn-right ui-btn ui-btn-inline ui-mini ui-corner-all ui-btn-icon-right ui-icon-gear">Options</a>
	</div><!-- /header -->

	<div role="main" class="ui-content">
		<br />
		<input id="nome_part" type="text" placeholder="nome da partitura" />
		<input id="arquivo" type="text" placeholder="caminho do arquivo" />
		<a class="button" id="btn_upload" href="#mainpage">Enviar</a>
		<br/>
		<br/>
		<br/>
		<a class="button" id="btn_le" href="#">Lê Arquivo</a>
		<textarea id="res_botao" rows="10" cols="50"></textarea>
	</div><!-- /content -->

</div><!-- /page upload -->

<!-- Start of third page: #criaEstudio -->
<div data-role="page" id="criaEstudio" data-footer="div_footer">

	<div data-role="header" data-theme="b">
		<h1>Criar Estúdio</h1>
	</div><!-- /header -->

	<div role="main" class="ui-content">
		<br /> <input type="text" required id="criaNomeEstudio"
			placeholder="nome do Estúdio" />
		<a class="button" href="#selecionaPartEst" id="btn_criaEstudio">Criar</a>
	</div><!-- /content -->
</div><!-- /page criaEstudio -->

<!-- Start of page: #selecionaPartEst MAESTRO -->
<div data-role="page" id="selecionaPartEst" data-footer="div_footer">

	<div data-role="header" data-theme="b">
		<h1>Estúdio</h1>
	</div><!-- /header -->

	<div role="main" class="ui-content">
		<form>
		<fieldset data-role="controlgroup">
			<legend>Escolha as partituras:</legend>
			<input name="est_1" id="est_1" type="checkbox">
			<label for="est_1">Estúdio 1 - Partitura 1</label>
			<input name="est_2t" id="est_2t" type="checkbox">
			<label for="est_2t">Estúdio 2 - Tuba</label>
			<input name="est_2c" id="est_2c" type="checkbox">
			<label for="est_2c">Estúdio 2 - Clarinete</label>
			<input name="est_2s" id="est_2s" type="checkbox">
			<label for="est_2s">Estúdio 2 - Saxofone</label>
			<input name="est_3c" id="est_3c" type="checkbox">
			<label for="est_3c">Estúdio 3 - Clarinete</label>
		</fieldset>
		</form>
		<a class="button" id="btn_selec" href="#mainpage">Selecionar</a>
		<br/>
		<br/>
		<label for="search-control-group">Search</label>
		<div data-role="controlgroup" data-type="horizontal">
			<input id="search-control-group" data-wrapper-class="controlgroup-textinput ui-btn" type="text">
			<!--button id="submit" onclick="adicionarcheck">Submit</button-->
		</div>
	</div><!-- /content -->
</div><!-- /page selecionaPartEst MAESTRO -->

<!-- Start of page: #selecionaPart -->
<div data-role="page" id="selecionaPart" data-footer="div_footer">

	<div data-role="header" data-theme="b">
		<h1>Estudio</h1>
	</div><!-- /header -->

	<div role="main" class="ui-content">
		<ul data-role="listview" data-inset="true" id="listaPart">
			<li>Estúdio - Partitura 1</li>
		</ul>
		<a class="button" id="btn_selecionaPart" href="#mainpage">Receber</a>
			<br/>
			<br/>
		<a class="button" id="btn_comecar" href="#exibePart">Começar</a>
	</div><!-- /content -->
	
</div><!-- /page selecionaPart -->

<!-- Start of page: #configuracoes -->
<div data-role="page" id="configuracoes" data-footer="div_footer">

	<div data-role="header" data-theme="b">
		<h1>Configurações</h1>
	</div><!-- /header -->

	<div role="main" class="ui-content">
		<br />
		<br />
		<label>Altura e Largura da Partitura</label>
		<input type="range" min="750" max="2050" value="750" step="100" onchange='showValue(this.value, "rangeAltura")' />
		<br/>
		<span style="width:auto" id="rangeAltura">750</span>
		<br />
		<br />
		<label>Escala da Partitura</label>
		<input type="range" min="1" max="3" value="1" step="0.5" onchange='showValue(this.value, "rangeEscala")' />
		<br/>
		<span style="width:auto" id="rangeEscala">1</span>
		<br />
		<br />
		<br />
		<br />
		<label>Velocidade</label>
		<input type="range" min="1" max="3" value="1" step="0.5" onchange='showValue(this.value, "rangeVelocidade")' />
		<br/>
		<span style="width:auto" id="rangeVelocidade">1</span>
		<br />
		<script type="text/javascript">
			function showValue(newValue, id)
			{
				document.getElementById(id).innerHTML=newValue;
			}
		</script>
		<br />
		<button id="btn_configuracoes">Gravar</button>
	</div><!-- /content -->
</div><!-- /page configuracoes -->

<!-- Start of page: #selecionaPart -->
<div data-role="page" id="selecionaPart" data-footer="div_footer">

	<div data-role="header" data-theme="b">
		<h1>Estúdio</h1>
	</div><!-- /header -->

	<div role="main" class="ui-content">
		<ul data-role="listview" data-inset="true" id="listaPart">
			<li>Estúdio - Partitura 1</li>
		</ul>
		<a class="button" id="btn_notificar" href="#exibePart">Começar</a>
	</div><!-- /content -->
	
</div><!-- /page selecionaPart -->

<!-- Start of page: #selecionaExemplo -->
<div data-role="page" id="selecionaExemplo" data-footer="div_footer">

	<div data-role="header" data-theme="b">
		<h1>Exemplos</h1>
	</div><!-- /header -->

	<div role="main" class="ui-content">
		<form name = "radiosForm">
			<fieldset data-role="controlgroup">
				<legend>Escolha o exemplo:</legend>
				<input name="radio-choice-v-2" id="echigo" value="on" checked="checked" type="radio">
				<label for="echigo">Echigo-Jish</label>
				<input name="radio-choice-v-2" id="dupla" value="off" type="radio">
				<label for="dupla">Dupla</label>
				<input name="radio-choice-v-2" id="simples" value="other" type="radio">
				<label for="simples">Simples</label>
			</fieldset>
		</form>
		
		<a class="button" id="btn_comecarExemplo" href="#exibePart">Começar</a>
	</div><!-- /content -->
</div><!-- /page selecionaExemplo -->

<!-- Start of page: #exibePart -->
<div data-role="page" id="exibePart" data-footer="div_footer">

	<div data-role="header" data-theme="b">
		<h1>Estúdio</h1>
	</div><!-- /header -->

	<div role="main" class="ui-content">
		<div id="exibe_info" class="upage-content" style="overflow: auto">
			<div id="vexflow">
				<br />
			</div>
		</div>
		<button id="slide" type="button">Slide</button>
		<a class="button" id="btn_voltaMain" href="#mainpage">Voltar e Limpar</a>
	</div><!-- /content -->
</div><!-- /page exibePart -->

<div data-role="footer" id="div_footer">
	<h4>footer</h4>
</div><!-- /footer -->

<script>
	var doc = new Vex.Flow.Document(ishigo);
	var formatter = doc.getFormatter();
	formatter.zoom = 3.0;
	console.log("número de compassos da partitura: " + doc.getNumberOfMeasures());
	//alert(formatter.measuresInBlock[0].length);
	formatter.setWidth(doc.getNumberOfMeasures() * 50);
	
	document.addEventListener('DOMContentLoaded', function () {   
		document.getElementById('slide').onclick = function () {
			document.getElementById('exibe_info').scrollLeft += 20;
		};
		document.getElementById('btn_comecarExemplo').onclick = function() {
			drawLine();
		
			var nBlocks = doc.getNumberOfMeasures() * 100;
			console.log("DENTRO DO BOTÃO: número de compassos da partitura: " + doc.getNumberOfMeasures() + "    " + nBlocks);
			document.getElementById('exibe_info').scrollLeft = -500;
			scrollBlocksIntoView(nBlocks, 500);
		}
		document.getElementById('btn_voltaMain').onclick = function() {
			while (typeof this.canvases[b] == "object") {
				// Remove canvases beyond the last one we are using
				document.getElementById('exibe_info').removeChild(this.canvases[b]);
				delete this.canvases[b];
				b++;
			  }
		}
	}, false);
	
	function scrollBlocksIntoView(numberOfBlocks, timeout) {
		console.log("number of blocks" + numberOfBlocks);
		var i = 0;
		function cb() {
			var elem = document.getElementById('exibe_info');
			document.getElementById('exibe_info').scrollLeft += 20;
			console.log("scrollLeft value: " + document.getElementById('exibe_info').scrollLeft);
			i++;
			if (i%100===0) console.log(i + " scroll: " + document.getElementById('exibe_info').scrollLeft + " - timeout: " + timeout);
			if (i < numberOfBlocks) setTimeout(cb, timeout);
		}
		cb();
	};
</script>
</body>
</html>
