<!DOCTYPE html>
<html>
<head>
<title>EasyScore</title>
<meta name="viewport"
	content="initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0" />

<!-- SCRIPTS VEXXX MUSICXML -->
<!-- VexFlow Sources -->
<script src="src/vex.js"></script>
<script src="src/flow.js"></script>
<script src="src/fraction.js"></script>
<script src="src/fonts/vexflow_font.js"></script>
<script src="src/glyph.js"></script>
<script src="src/tables.js"></script>
<script src="src/stave.js"></script>
<script src="src/staveconnector.js"></script>
<script src="src/voice.js"></script>
<script src="src/voicegroup.js"></script>
<script src="src/modifier.js"></script>
<script src="src/modifiercontext.js"></script>
<script src="src/accidental.js"></script>
<script src="src/dot.js"></script>
<script src="src/tickcontext.js"></script>
<script src="src/tickable.js"></script>
<script src="src/note.js"></script>
<script src="src/bend.js"></script>
<script src="src/stem.js"></script>
<script src="src/notehead.js"></script>
<script src="src/stemmablenote.js"></script>
<script src="src/stavenote.js"></script>
<script src="src/tabnote.js"></script>
<script src="src/barnote.js"></script>
<script src="src/clefnote.js"></script>
<script src="src/timesignote.js"></script>
<script src="src/ghostnote.js"></script>
<script src="src/formatter.js"></script>
<script src="src/stavetie.js"></script>
<script src="src/stavehairpin.js"></script>
<script src="src/tabtie.js"></script>
<script src="src/tabslide.js"></script>
<script src="src/beam.js"></script>
<script src="src/vibrato.js"></script>
<script src="src/annotation.js"></script>
<script src="src/tuning.js"></script>
<script src="src/stavemodifier.js"></script>
<script src="src/keysignature.js"></script>
<script src="src/timesignature.js"></script>
<script src="src/clef.js"></script>
<script src="src/music.js"></script>
<script src="src/keymanager.js"></script>
<script src="src/renderer.js"></script>
<script src="src/stavebarline.js"></script>
<script src="src/stavevolta.js"></script>
<script src="src/staverepetition.js"></script>
<script src="src/stavesection.js"></script>
<script src="src/stavetempo.js"></script>
<script src="src/stavetext.js"></script>
<script src="src/raphaelcontext.js"></script>
<script src="src/canvascontext.js"></script>
<script src="src/tuplet.js"></script>
<script src="src/boundingbox.js"></script>

<script src="src/measure.js"></script>
<script src="src/musicxml.js"></script>
<script src="src/document.js"></script>
<script src="src/documentformatter.js"></script>

<!-- Test Sources -->
<link rel="stylesheet" href="src/qunit.css" type="text/css"
	media="screen" />
<script src="src/qunit.js"></script>
<!--  script src="src/vexflow_test_helpers.js"></script-->
<!--  script src="js/document_web.js"></script -->
<script src="js/part_complete.js"></script>
<!-- END OF MUSICXML -->

<script src="js/websocket.js"></script>
<link rel="stylesheet" type="text/css" href="js/af.ui.css" />
<link rel="stylesheet" type="text/css" href="js/icons.css" />
<script type="text/javascript" charset="utf-8"
	src="js/appframework.ui.min.js"></script>
<!-- NÃO DEIXA APARECER O CHECKBOX -->
<!--AppFramework plugin for sliding side menu-->
<script type="text/javascript" charset="utf-8" src="js/af.slidemenu.js"></script>
<script src="cordova.js"></script>

<script>
	var altPart = 750;
	var largPart = 130;
	var escPart = 1.0;
	var velPart = 1 * 1000;
	
	function scrollBlocksIntoView(numberOfBlocks, viewPortName, timeout) {
        var i = 0;
        function cb() {
            var el = $("#" + viewPortName + "_canvas" + i)[0];
            if (!el) return false;
            
            el.scrollIntoView();
            
            i++;
            console.log(i);
            if (i < numberOfBlocks) {
                setTimeout(cb, timeout);
            }
        }
        cb();
    }
    
    function drawPart(container) {
        var doc = new Vex.Flow.Document(comp);
        var formatter = doc.getFormatter();
        formatter.setWidth(600).draw($("#" + container)[0]);

        // Numero de blocos
        var nBlocks = formatter.measuresInBlock.length;
        scrollBlocksIntoView(nBlocks, container, 3000);     
    }
	
	$(document).ready(function() {
		init();
		$.ui.setRightSideMenuWidth(220);
		$.ui.launch();
		$('#btn_comecar').click(function() {
			Vex.Flow.Test.Web.Start();
			setInterval(function() {
				windowScoreTop+=130; 
			    window.scrollTo(0,windowScoreTop);
			    if (windowScoreTop > 1000) {
			    	clearInterval();
			    }
			}, 1000);
			//deve iniciar a execução da partitura escolhida
		});
		$('#btn_upload').click(function() {
			//deve enviar a partitura informada para o servidor
			//Vex.Flow.Test.Web.Start();
			drawPart("vexflow_testoutput");
		});
		$('#btn_criaEstudio').click(function() {
			if (createStudio(document.getElementById("criaNomeEstudio").value)) {
				alert("Estúdio " + document.getElementById("criaNomeEstudio").value + " criado com sucesso");
			};
		});
		$('#btn_selecionaPart').click(function() {
			//precisa atribuir o usuário ao grupo e fazer download da partitura!
		});
		$('#btn_configuracoes').click(function() {
			altPart = document.getElementById("rangeAltura").innerHTML;
			escPart = document.getElementById("rangeEscala").innerHTML;
			velPart = (document.getElementById("rangeVelocidade").innerHTML) * 1000;
			alert("Altura: " + altPart + "\n" +
					"Largura: " + largPart + "\n" +
					"Escala: " + escPart + "\n" +
					"Velocidade: "+ velPart);
		});
		$('#btn_closeWeb').click(function() {
			close();
		});
		$('#consultarEstudios').click(function() {
			listStudio();
		})
	});

	$.ui.animateHeaders = false;
</script>
<style text="text/css">
#exibePart {
	background-color: #eed;
	background: #eed;
}

#exibe_info {
	background-color: #eed;
	background: #eed;
}

canvas {
	background: #eed;
}

div.egcode {
	font-family: Courier;
	font-size: 14px;
}
</style>
</head>
<body>
	<div id="afui">
		<aside>
			<ul class="list">
				<li id="consultarEstudios"><a href="#mainpage">Consultar Estúdios</a></li>
				<li><a href="#upload">Carregar Partitura</a></li>
				<li><a href="#criaEstudio">Criar Estúdio</a></li>
				<li><a href="#configuracoes">Configurações</a></li>
				<li><a href="#selecionaPartEst">SelecionaPartEst</a></li>
				<li><a href="#selecionaPart">SelecionaPart</a></li>
			</ul>
		</aside>

		<div id="content" class="uwrap">
			<div class="upage panel" id="mainpage" data-header="af-header"
				data-footer="af-footer">
				<header class="container-group inner-element uib_w_1"
					data-uib="app_framework/header" data-ver="0" id="af-header">
					<a onclick='$.ui.toggleRightSideMenu()'
						class='button icon settings' style="float: right"></a>
					<h1>EasyScore</h1>
				</header>
				<div class="upage-content" id="mainsub">
					<ul class="list widget uib_w_2 d-margins"
						data-uib="app_framework/listview" id="listaEstudios" data-ver="0">
						<li><input type="checkbox" name="checkbox-1" id="checkbox-1"
							class="checkboxDelete" /> <a href="#selecionaPar">
								Estúdio 1 </a></li>
						<li><input type="checkbox" name="checkbox-1" id="checkbox-1"
							class="checkboxDelete" /> <a href="#selecionaPart">
								Estúdio 2 </a></li>
					</ul>
					<br/>
					<br/>
					<a class="button" data-uib="app_framework/button" data-ver="0" id="btn_closeWeb">CloseWeb</a>
				</div>
				<!-- /upage-content -->
			</div>	<!-- /Main -->
			<!--Música_Info-->
			<div class="upage panel" id="upload" data-header="af-header-upload"
				data-footer="af-footer">
				<header class="container-group inner-element uib_w_10"
					data-uib="app_framework/header" data-ver="0" id="af-header-upload">
					<a onclick='$.ui.toggleRightSideMenu()'
						class='button icon settings' style="float: right"></a>
					<h1>Carregar Partitura</h1>
				</header>
				<div id="upload_info" class="upage-content">
					<br />
					<input name="arquivo" type="text" placeholder="caminho do arquivo" />
					<a class="button" data-uib="app_framework/button"
						id="btn_upload" href="#mainpage" data-ver="0">Enviar</a>
				</div>
			</div>
			<!-- Upload Partitura -->
			<div class="upage panel" id="criaEstudio"
				data-header="af-header-criaEstudio" data-footer="af-footer">
				<header class="container-group inner-element uib_w_10"
					data-uib="app_framework/header" data-ver="0"
					id="af-header-criaEstudio">
					<a onclick='$.ui.toggleRightSideMenu()'
						class='button icon settings' style="float: right"></a>
					<h1>Criar Estúdio</h1>
				</header>
				<div id="criaEstudio_info" class="upage-content">
					<br /> <input type="text" required id="criaNomeEstudio"
						placeholder="nome do estúdio" />
					<a class="button" href="#selecionaPartEst" id="btn_criaEstudio"
						data-uib="app_framework/button" data-ver="0">Criar</a>
				</div>
			</div>
			<!-- /Criar Estúdio -->
			<div class="upage panel" id="selecionaPartEst"
				data-header="af-header-selecionaPartEst" data-footer="af-footer">
				<header class="container-group inner-element uib_w_10"
					data-uib="app_framework/header" data-ver="0"
					id="af-header-selecionaPartEst">
					<a onclick='$.ui.toggleRightSideMenu()'
						class='button icon settings' style="float: right"></a>
					<h1>Estúdio 1</h1>
				</header>
				<div id="criaEstudio_info" class="upage-content">
					<ul class="list widget uib_w_2 d-margins"
						data-uib="app_framework/listview" id="listaPartEst" data-ver="0">
						<li>Estúdio 1 - Trompete</li>
						<li>Estúdio 1 - Trombone</li>
						<li>Estúdio 1 - Clarinete</li>
						<li>Estúdio 2 - Tuba</li>
						<li>Estúdio 2 - Clarinete</li>
						<li>Estúdio 2 - Saxofone</li>
						<li>Estúdio 3 - Clarinete</li>
					</ul>
				</div>
			</div>
			<!-- /MAESTRO - Selecionar Partituras do Estúdio -->
			<div class="upage panel" id="selecionaPart"
				data-header="af-header-selecionaPart" data-footer="af-footer">
				<header class="container-group inner-element uib_w_10"
					data-uib="app_framework/header" data-ver="0"
					id="af-header-selecionaPart">
					<a onclick='$.ui.toggleRightSideMenu()'
						class='button icon settings' style="float: right"></a>
					<h1>Estúdio 1</h1>
				</header>
				<div id="selecionaPart_info" class="upage-content">
					<ul class="list widget uib_w_2 d-margins"
						data-uib="app_framework/listview" id="listaPart" data-ver="0">
						<li>Estúdio 1 - Trompete</li>
						<li>Estúdio 1 - Trombone</li>
						<li>Estúdio 1 - Clarinete</li>
					</ul>
					<!-- button class="button widget uib_w_14 d-margins"
						data-uib="app_framework/button" data-ver="0"
						id="btn_selecionaPart" data-transition="fade">Receber
						partitura</button>
					<!-- ESTE BOTÃO SÓ PODE APARECER PARA O MAESTRO!!! -->
					<!-- button class="button widget uib_w_14 d-margins"
						data-uib="app_framework/button" data-ver="0" id="btn_comecar"
						data-transition="fade">
						<a href="#exibePart" style="text-decoration: none">Começar</a>
					</button -->
					<!-- div class="button-grouped flex widget uib_w_13 d-margins"
						data-uib="app_framework/button_group" data-ver="0">
						<button class="button widget uib_w_14 d-margins"
							data-uib="app_framework/button" data-ver="0" id="btn_"
							data-transition="fade">
							Receber partitura
						</button>
					</div
					<br/>-->
					
					<div class="button-grouped flex widget uib_w_13 d-margins"
						data-uib="app_framework/button_group" data-ver="0">
						<button class="button widget uib_w_14 d-margins"
							data-uib="app_framework/button" data-ver="0" id="bttttn_comecar"
							data-transition="fade">
							<a href="#exibePart" style="text-decoration: none">Começar</a>
						</button>
					</div>
					
					<a class="button" data-uib="app_framework/button" data-ver="0" 
						id="btn_comecar" href="#exibePart">Começar</a>
				</div>
			</div>
			<!-- /MÚSICO - Selecionar Partituras -->
			<div class="upage panel" id="configuracoes"
				data-header="af-header-configuracoes" data-footer="af-footer">
				<header class="container-group inner-element uib_w_10"
					data-uib="app_framework/header" data-ver="0"
					id="af-header-configuracoes">
					<a onclick='$.ui.toggleRightSideMenu()'
						class='button icon settings' style="float: right"></a>
					<h1>Configurações</h1>
				</header>
				<div id="configuracoes_info" class="upage-content">
					<br />
					<br />
					<label>Altura e Largura da Partitura</label>
					<input type="range" min="0" max="3" value="0" step="1" onchange='showValue(this.value, "rangeAltura")' />
					<br/>
					<span style="width:auto" id="rangeAltura">0</span>
					<br />
					<br />
					<label>Escala da Partitura</label>
					<input type="range" min="0" max="3" value="0" step="1" onchange='showValue(this.value, "rangeEscala")' />
					<br/>
					<span style="width:auto" id="rangeEscala">0</span>
					<br />
					<br />
					<canvas></canvas>
					<br />
					<br />
					<br />
					<br />
					<label>Velocidade</label>
					<input type="range" min="0" max="3" value="0" step="0.5" onchange='showValue(this.value, "rangeVelocidade")' />
					<br/>
					<span style="width:auto" id="rangeVelocidade">0</span>
					<br />
					<script type="text/javascript">
						function showValue(newValue, id)
						{
							document.getElementById(id).innerHTML=newValue;
						}
					</script>
					<br />
					<button class="button widget uib_w_14 d-margins"
						data-uib="app_framework/button" data-ver="0"
						id="btn_configuracoes" data-transition="fade">Gravar</button>
				</div>
			</div>
			<!-- /Configurações -->
			<div class="upage panel" id="exibePart"
				data-header="af-header-exibePart" data-footer="af-footer">
				<header class="container-group inner-element uib_w_10"
					data-uib="app_framework/header" data-ver="0"
					id="af-header-exibePart">
					<a onclick='$.ui.toggleRightSideMenu()'
						class='button icon settings' style="float: right"></a>
					<h1>Estúdio 1</h1>
				</header>
				<div id="exibe_info" class="upage-content">
					<div style="text-align: center;">
						<div id="vexflow_testoutput"></div>
					</div>
				</div>
			</div>
			<!-- /Exibe partitura -->
			<footer id="af-footer">
			</footer>
		</div>
	</div>
</body>
</html>